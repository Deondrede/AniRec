{"ast":null,"code":"var _jsxFileName = \"/home/jason/AniRec/test/anirec/src/pages/landing_page/survey_page/surveyOne.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback, Fragment } from 'react';\nimport MySurvey from './surveyType';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst axios = require('axios').default;\n\n{\n  /*\n     Author: Caitlin-Dawn Sangcap\n     Spring 2021. CSCI 499 - Capstone Project: AniRec\n      Created this following this YouTube tutorial: https://www.youtube.com/watch?v=NW0GwiHmNik\n     Survey heirarchy: questions --> surveyType --> surveyOne\n     This file holds the survey logic.\n      what it currently does:\n      - allows the users to take the survey\n      - all needed answers are gathered\n      - send the survey responses to the backend\n      \n     Issues:\n         problem titles (DON'T CLICK ON):\n          - Action --> Hunter x Hunter\n          - Adventure --> Sword Art Online (gets error ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all())\n          - Fantasy --> something wrong with the whole section\n          - Magical Girl --> something wrong with the whole section\n          Removed portions:\n          - commented out the setFinalPage() due to time constraints\n            - was originally meant to display custom Thank you page.\n         \n         Backend related:\n          - once the watched_anime field in the backend reaches or gets close to 50 charcters,\n            the backend will start sending 500 errors\n            EXAMPLE ERROR:\n                 django.db.utils.DataError: value too long for type character varying(50)\n  */\n} //function to send all the data to the backend\n// copied from Deondre's work\n\nfunction register(formData1) {\n  axios({\n    method: \"post\",\n    url: \"http://localhost:5000/anime\",\n    data: formData1,\n    headers: {\n      \"Content-Type\": \"multipart/form-data\"\n    }\n  }).then(function (response) {\n    //handle success\n    console.log(response);\n  }).catch(function (response) {\n    //handle error\n    console.log(response);\n  }); //console.log(\"sent request\");\n}\n\nconst SurveyOne = () => {\n  _s();\n\n  const [showPage, setShowPage] = useState(true); //function takes the data from the user and sends it to the backend.\n  // NOTE: This is survey specific. ONLY WORKS WITH THE SURVEY PROVIDED.\n\n  const onCompletePage = useCallback(data => {\n    //console.log(\"This is from the surveyOne2.js file \",data);\n    setShowPage(!showPage);\n    let response = data; // to play around with the data\n\n    console.log(data);\n    let titles = []; //store all the wanted titles from the survey \n\n    let send_data = []; //store all the FormData to be sent\n\n    let char_count = 0; //keep track of the amount of characters in titles to avoid errors\n\n    let username = response.Username; //console.log(username);\n    //get list of all prefered genres\n\n    let desired_genres = response.prefered_genres; //go through all the desired genres\n\n    for (var x = 0; x < desired_genres.length; x++) {\n      let selected_genre = desired_genres[x]; //console.log(response[selected_genre][\"Yes\"]);\n      //yes answers\n\n      if (response[selected_genre][\"Yes\"] != null) {\n        //get the yes titles\n        let yes_titles = response[selected_genre][\"Yes\"][\"Anime\"]; //console.log(yes_titles);\n\n        for (var y = 0; y < yes_titles.length; y++) {\n          //console.log(\"yes\",yes_titles[y]);\n          //add the yes_titles to titles\n          if (titles.includes(yes_titles[y]) === false) {\n            //console.log(\"yes\",yes_titles[y]);\n            titles.push(yes_titles[y]);\n          }\n        }\n      } //maybe answers\n\n\n      if (response[selected_genre][\"Maybe\"] != null) {\n        //get the maybe titles\n        let maybe_titles = response[selected_genre][\"Maybe\"][\"Anime\"]; //console.log(maybe_titles);\n\n        for (var m = 0; m < maybe_titles.length; m++) {\n          //console.log(\"maybe\",maybe_titles[m]);\n          //add the maybe_titles to titles\n          if (titles.includes(maybe_titles[m]) === false) {\n            //console.log(\"maybe\",maybe_titles[m]);\n            titles.push(maybe_titles[m]);\n          }\n        }\n      }\n    } //console.log(titles.length);\n    //making the different formData to be send to the backend\n\n\n    for (var a = 0; a < titles.length; a++) {\n      if (char_count <= 50) {\n        char_count = char_count + titles[a].length + 2;\n        let bodyFormData = new FormData();\n        bodyFormData.append(\"username\", username);\n        bodyFormData.append(\"anime\", titles[a]);\n        send_data.push(bodyFormData);\n      }\n    }\n\n    console.log(send_data.length); //sending the data to the backend\n\n    send_data.forEach(element => {\n      register(element);\n    });\n  }, [showPage]); //can customize the thank you page for what we want. not mandatory.\n  // removed from use due to time constraints\n\n  /*const setFinalPage = () => {\n      return(\n          <main>\n              <h1>Thank you for taking the survey. Please wait while we build your recommendations.</h1>\n          </main>\n      )\n  }*/\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MySurvey, {\n      showCompletedPage: data => onCompletePage(data)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/Anime\",\n        children: \"Head to AniRec\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SurveyOne, \"7rg6rrqyxVvLOn0oTKj3Zv8NMN0=\");\n\n_c = SurveyOne;\nexport default SurveyOne;\n\nvar _c;\n\n$RefreshReg$(_c, \"SurveyOne\");","map":{"version":3,"sources":["/home/jason/AniRec/test/anirec/src/pages/landing_page/survey_page/surveyOne.js"],"names":["React","useState","useCallback","Fragment","MySurvey","axios","require","default","register","formData1","method","url","data","headers","then","response","console","log","catch","SurveyOne","showPage","setShowPage","onCompletePage","titles","send_data","char_count","username","Username","desired_genres","prefered_genres","x","length","selected_genre","yes_titles","y","includes","push","maybe_titles","m","a","bodyFormData","FormData","append","forEach","element"],"mappings":"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","sourcesContent":["import React, {useState, useCallback, Fragment} from 'react';\nimport MySurvey from './surveyType';\nconst axios = require('axios').default;\n\n{/*\n    Author: Caitlin-Dawn Sangcap\n    Spring 2021. CSCI 499 - Capstone Project: AniRec\n\n    Created this following this YouTube tutorial: https://www.youtube.com/watch?v=NW0GwiHmNik\n    Survey heirarchy: questions --> surveyType --> surveyOne\n    This file holds the survey logic.\n\n    what it currently does:\n     - allows the users to take the survey\n     - all needed answers are gathered\n     - send the survey responses to the backend\n     \n    Issues:\n        problem titles (DON'T CLICK ON):\n         - Action --> Hunter x Hunter\n         - Adventure --> Sword Art Online (gets error ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all())\n         - Fantasy --> something wrong with the whole section\n         - Magical Girl --> something wrong with the whole section\n\n        Removed portions:\n         - commented out the setFinalPage() due to time constraints\n           - was originally meant to display custom Thank you page.\n        \n        Backend related:\n         - once the watched_anime field in the backend reaches or gets close to 50 charcters,\n           the backend will start sending 500 errors\n           EXAMPLE ERROR:\n                django.db.utils.DataError: value too long for type character varying(50)\n\n*/}\n\n//function to send all the data to the backend\n// copied from Deondre's work\nfunction register(formData1){\n    axios({\n        method: \"post\",\n        url: \"http://localhost:5000/anime\",\n        data: formData1,\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      })\n        .then(function (response) {\n          //handle success\n          console.log(response);\n        })\n        .catch(function (response) {\n          //handle error\n          console.log(response);\n        });\n        //console.log(\"sent request\");\n    }\n\nconst SurveyOne = () => {\n\n    const [showPage, setShowPage] = useState(true);\n\n    //function takes the data from the user and sends it to the backend.\n    // NOTE: This is survey specific. ONLY WORKS WITH THE SURVEY PROVIDED.\n    const onCompletePage = useCallback((data)=> {\n        //console.log(\"This is from the surveyOne2.js file \",data);\n        setShowPage(!showPage);\n\n        let response = data; // to play around with the data\n        console.log(data);\n        let titles = []; //store all the wanted titles from the survey \n        let send_data = []; //store all the FormData to be sent\n        let char_count = 0; //keep track of the amount of characters in titles to avoid errors\n        let username = response.Username;\n\n        //console.log(username);\n        //get list of all prefered genres\n        let desired_genres = response.prefered_genres;\n\n        //go through all the desired genres\n        for (var x = 0; x < desired_genres.length; x++) {\n            let selected_genre = desired_genres[x];\n\n            //console.log(response[selected_genre][\"Yes\"]);\n            //yes answers\n            if (response[selected_genre][\"Yes\"] != null){\n                //get the yes titles\n                let yes_titles = response[selected_genre][\"Yes\"][\"Anime\"];\n                //console.log(yes_titles);\n                for (var y = 0; y < yes_titles.length; y++){\n                    //console.log(\"yes\",yes_titles[y]);\n                    //add the yes_titles to titles\n                    if (titles.includes(yes_titles[y]) === false){\n                        //console.log(\"yes\",yes_titles[y]);\n                        titles.push(yes_titles[y]);\n                        \n                    }\n                }\n            }\n\n            //maybe answers\n            if(response[selected_genre][\"Maybe\"] != null){\n                //get the maybe titles\n                let maybe_titles = response[selected_genre][\"Maybe\"][\"Anime\"];\n                //console.log(maybe_titles);\n                for( var m = 0; m < maybe_titles.length; m++){\n                    //console.log(\"maybe\",maybe_titles[m]);\n                    //add the maybe_titles to titles\n                    if (titles.includes(maybe_titles[m]) === false) {\n                        //console.log(\"maybe\",maybe_titles[m]);\n                        titles.push(maybe_titles[m]);\n                    }\n                }\n            }\n        }\n        //console.log(titles.length);\n\n        //making the different formData to be send to the backend\n        for( var a =0; a < titles.length; a++){\n            if( char_count <= 50){\n                char_count = char_count + titles[a].length + 2;\n                let bodyFormData = new FormData();\n                bodyFormData.append(\"username\", username);\n                bodyFormData.append(\"anime\", titles[a]);\n                send_data.push(bodyFormData);\n            }\n        }\n\n        console.log(send_data.length);\n        //sending the data to the backend\n        send_data.forEach(element => {\n            register(element)\n        });\n        \n    }, [showPage])\n\n    //can customize the thank you page for what we want. not mandatory.\n    // removed from use due to time constraints\n    /*const setFinalPage = () => {\n        return(\n            <main>\n                <h1>Thank you for taking the survey. Please wait while we build your recommendations.</h1>\n            </main>\n        )\n    }*/\n\n    return(\n        <Fragment>\n            <MySurvey showCompletedPage={data=>onCompletePage(data)} />\n            <button><a href=\"/Anime\">Head to AniRec</a></button>\n        </Fragment>\n        \n    )\n}\n\nexport default SurveyOne;\n"]},"metadata":{},"sourceType":"module"}